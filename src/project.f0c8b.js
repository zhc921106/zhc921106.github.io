window.__require=function t(o,e,n){function i(s,r){if(!e[s]){if(!o[s]){var h=s.split("/");if(h=h[h.length-1],!o[h]){var u="function"==typeof __require&&__require;if(!r&&u)return u(h,!0);if(c)return c(h,!0);throw new Error("Cannot find module '"+s+"'")}}var a=e[s]={exports:{}};o[s][0].call(a.exports,function(t){return i(o[s][1][t]||t)},a,a.exports,t,o,e,n)}return e[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({Bomb:[function(t,o,e){"use strict";cc._RF.push(o,"5fcfc4Z7clDXoeudR1g8txp","Bomb");var n=function(t,o){return Math.random()*(o-t)+t},i=Math.abs;cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.curArr=[];for(var t=this.node.children[0],o=0;o<100;o++){cc.instantiate(t).parent=this.node}this.node.z=-1e6},reset:function(){for(var t=this.node.children,o=0;o<t.length;o++){t[o].position=cc.v3(0,0,0)}this.curArr.length=0},lanuch:function(){this.curArr.length=0;for(var t=this.node.children,o=0;o<t.length;o++){var e=t[o];e.position=cc.v3(0,0,0),e.setScale(20,20,20),this.curArr.push(e)}},update:function(t){if(!(this.curArr.length<1)){this.curArr.forEach(function(o){0==o.x&&(o.dx=n(-20,20)),o.x+=o.dx,0==o.y&&(o.dy=n(-20,20)),o.y+=o.dy,0==o.z&&(o.dz=n(-20,20)),o.z+=o.dz,o.dx>0?o.dx+=5*t:o.dx-=5*t,o.dy>0?o.dy+=5*t:o.dy-=5*t,o.dz>0?o.dz+=5*t:o.dz-=5*t,(i(o.x)>600||i(o.y)>600||i(o.z)>600)&&(o.z=-1e6)})}}}),cc._RF.pop()},{}],HelloWorld:[function(t,o,e){"use strict";cc._RF.push(o,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{touch:cc.Node,cam3D:cc.Node,role:cc.Node,obstacle:cc.Node,bomb:cc.Component},onLoad:function(){console.log("onload",this.name),this._initData(),this._initTouch(),this._initKeyBoardTouch()},update:function(t){if(this.results.length=0,this.touchPos){var o=this.cam3D.getComponent(cc.Camera).getRay(this.touchPos),e=cc.geomUtils.intersect.raycast(this.obstacle,o);if(e.length>0)for(var n=0;n<e.length;n++){var i=e[n];this.bomb.node.position=i.node.position,i.node.getComponent("Rotate").reset(),this.bomb.lanuch()}this.results=e}},onClickW:function(){this.role.z-=this.moveSpeed},onClickA:function(){console.log("onClickA"),this.role.x-=this.moveSpeed},onClickD:function(){this.role.x+=this.moveSpeed},onClickS:function(){this.role.z+=this.moveSpeed},_initData:function(){this.ratioSpeed=.5,this.moveSpeed=20},_initTouch:function(){this._initMoveTouch()},_initMoveTouch:function(){var t=cc.find("Canvas");t.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),t.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.touchPos=null,this.results=[]},onTouchStart:function(t){this.touchPos=t.touch.getLocation()},onTouchMove:function(t){this.touchPos=t.touch.getLocation()},onTouchEnd:function(t){this.touchPos=null},_initKeyBoardTouch:function(){var t=this,o={87:"W",65:"A",83:"S",68:"D"};cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){var n="onClick"+o[e.keyCode];t[n]&&t[n]()})}}),cc._RF.pop()},{}],Obstacle:[function(t,o,e){"use strict";cc._RF.push(o,"8c44cE8jYVBYoWtms6HZYrx","Obstacle"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._init(),this._loop()},_init:function(){this.curMap={};for(var t=this.node.children,o=0;o<t.length;o++){var e=t[o];this.curMap[e.name]=e}},_loop:function(){for(var t in this.curMap){this.curMap[t].active=!0}},update:function(t){}}),cc._RF.pop()},{}],Rotate:[function(t,o,e){"use strict";cc._RF.push(o,"0ad2bEYaRZOQ6xmgHRZucbT","Rotate");var n=function(t,o){return Math.floor(Math.random()*(o-t))+t};cc.Class({extends:cc.Component,properties:{rotate:{type:cc.Integer,default:4},speed:{type:cc.Integer,default:30},delay:{type:cc.Integer,default:-1}},_setPosx:function(){this.node.x=n(-400,400)},_setPosz:function(){this.node.z=-3450},_reset:function(){this.dt=0,this._setPosz(),this._setPosx()},reset:function(){var t=this;this._reset(),this.dt=-2,this.scheduleOnce(function(){t.dt=0},2)},onLoad:function(){var t=this;this.scale=this.node.scale,this.delay>-1?(this._reset(),this.dt=-2,this.scheduleOnce(function(){t.dt=0},this.delay)):this.dt=-2},update:function(t){this.node.eulerAngles=cc.v3(Date.now()/this.rotate,Date.now()/this.rotate,0);var o=this.scale+n(-4,4);this.node.setScale(o,o,o),this.dt<-1||(this.dt+=t,this.node.z>1e3?this._reset():this.node.z+=10*this.dt+this.speed)}}),cc._RF.pop()},{}]},{},["Bomb","HelloWorld","Obstacle","Rotate"]);